{"ast":null,"code":"var _jsxFileName = \"/Users/erwandelory/Documents/Semestre_9/Cloud_Computing/projetcloud2front/src/pages/home.jsx\";\nimport React, { useState } from 'react';\nimport { Button, Col, Container, Form, Row, Table } from 'react-bootstrap';\nimport { Map, TileLayer, Marker } from 'react-leaflet';\nimport { Icon } from 'leaflet';\nimport 'leaflet/dist/leaflet.css';\nexport const icon = new Icon({\n  iconUrl: 'https://s3-us-west-2.amazonaws.com/s.cdpn.io/134893/pin-red.svg',\n  iconSize: [25, 25]\n});\n\nconst LocationMarker = ({\n  coord\n}) => {\n  const coor = coord.split(',');\n  return /*#__PURE__*/React.createElement(Marker, {\n    position: [coor[0], coor[1]],\n    icon: icon,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 14,\n      columnNumber: 10\n    }\n  });\n};\n\nconst Home = () => {\n  const [latitude, setLatitude] = useState('46.227638');\n  const [longitude, setLongitude] = useState('2.213749');\n  const [name, setName] = useState('');\n  const [message, setMessage] = useState('');\n  const [lieu, setLieu] = useState([]);\n  const [hierarchy, setHierarchy] = useState([]);\n\n  const handleInputLatitudeChange = event => {\n    const {\n      value\n    } = event.target;\n    setLatitude(value);\n  };\n\n  const handleInputLongitudeChange = event => {\n    const {\n      value\n    } = event.target;\n    setLongitude(value);\n  };\n\n  const handleInputNameChange = event => {\n    const {\n      value\n    } = event.target;\n    setName(value);\n  };\n\n  const searchByCoord = () => {\n    fetch('http://localhost:5000/api/r1', {\n      method: 'POST',\n      headers: {\n        Accept: 'application/json',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        lat: latitude,\n        lon: longitude,\n        code: 4\n      })\n    }).then(res => res.json()).then(data => {\n      if (data.msg) {\n        setMessage(data.msg);\n      } else {\n        setLieu(data.lieu);\n        setHierarchy(data.hierarchy);\n        setMessage('');\n      }\n    });\n  };\n\n  const searchByName = () => {\n    fetch(`http://localhost:5000/api/r2/${name}/4`, {\n      method: 'GET',\n      headers: {\n        Accept: 'application/json',\n        'Content-Type': 'application/json'\n      }\n    }).then(res => res.json()).then(data => {\n      setLieu(data.lieu);\n      setHierarchy(data.hierarchy);\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(Container, {\n    className: \"homePage\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Form, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Form.Group, {\n    controlId: \"ville\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 11\n    }\n  }, \"Recherche par ville\"), /*#__PURE__*/React.createElement(Form.Control, {\n    type: \"text\",\n    placeholder: \"Saisir le nom d'une ville\",\n    value: name,\n    onChange: handleInputNameChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(Button, {\n    variant: \"warning\",\n    onClick: searchByName,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 9\n    }\n  }, \"Envoyer\")), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Table, {\n    striped: true,\n    bordered: true,\n    hover: true,\n    size: \"sm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 13\n    }\n  }, \"Lieux\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 13\n    }\n  }, \"Latitude\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 13\n    }\n  }, \"Longitude\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 13\n    }\n  }, \"Population\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 9\n    }\n  }, lieu.map(data => /*#__PURE__*/React.createElement(\"tr\", {\n    key: data.lat,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 15\n    }\n  }, data.name), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 15\n    }\n  }, data.lat), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 15\n    }\n  }, data.lon), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 15\n    }\n  }, data.pop))))), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 7\n    }\n  }), hierarchy.length > 0 && /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 11\n    }\n  }, \"Ces lieux se trouvent dans la zone: \", hierarchy[0].name, \" avec une population de \", hierarchy[0].pop, \" habitants, qui se trouve dans le d\\xE9partement: \", hierarchy[1].name, \" avec une population de\", ' ', hierarchy[1].pop, \" habitants, qui se trouve dans la r\\xE9gion:\", ' ', hierarchy[2].name, \" avec une population de \", hierarchy[2].pop, ' ', \"habitants, qui se trouve dans le pays: \", hierarchy[3].name, \" avec une population de \", hierarchy[3].pop, \" habitants\")), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Form, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Form.Group, {\n    controlId: \"coord\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 11\n    }\n  }, \"Recherche par coordonn\\xE9es\"), /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 13\n    }\n  }, \"Latitude\", /*#__PURE__*/React.createElement(Form.Control, {\n    type: \"text\",\n    placeholder: \"Saisir la latitude\",\n    value: latitude,\n    onChange: handleInputLatitudeChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 13\n    }\n  }, \"Longitude\", /*#__PURE__*/React.createElement(Form.Control, {\n    type: \"text\",\n    placeholder: \"Saisir la longitude\",\n    value: longitude,\n    onChange: handleInputLongitudeChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 15\n    }\n  })))), /*#__PURE__*/React.createElement(Button, {\n    variant: \"warning\",\n    onClick: searchByCoord,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 9\n    }\n  }, \"Envoyer\")), /*#__PURE__*/React.createElement(\"p\", {\n    className: alert,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 7\n    }\n  }, message), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Map, {\n    center: [latitude, longitude],\n    zoom: 6,\n    scrollWheelZoom: false,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(TileLayer, {\n    attribution: \"\\xA9 <a href=\\\"http://osm.org/copyright\\\">OpenStreetMap</a> contributors\",\n    url: \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 9\n    }\n  }), lieu.map(data => /*#__PURE__*/React.createElement(LocationMarker, {\n    key: data.lat,\n    coord: `${data.lat},${data.lon}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 11\n    }\n  }))));\n};\n\nexport default Home;","map":{"version":3,"sources":["/Users/erwandelory/Documents/Semestre_9/Cloud_Computing/projetcloud2front/src/pages/home.jsx"],"names":["React","useState","Button","Col","Container","Form","Row","Table","Map","TileLayer","Marker","Icon","icon","iconUrl","iconSize","LocationMarker","coord","coor","split","Home","latitude","setLatitude","longitude","setLongitude","name","setName","message","setMessage","lieu","setLieu","hierarchy","setHierarchy","handleInputLatitudeChange","event","value","target","handleInputLongitudeChange","handleInputNameChange","searchByCoord","fetch","method","headers","Accept","body","JSON","stringify","lat","lon","code","then","res","json","data","msg","searchByName","map","pop","length","alert"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport { Button, Col, Container, Form, Row, Table } from 'react-bootstrap';\nimport { Map, TileLayer, Marker } from 'react-leaflet';\nimport { Icon } from 'leaflet';\nimport 'leaflet/dist/leaflet.css';\n\nexport const icon = new Icon({\n  iconUrl: 'https://s3-us-west-2.amazonaws.com/s.cdpn.io/134893/pin-red.svg',\n  iconSize: [25, 25],\n});\n\nconst LocationMarker = ({ coord }) => {\n  const coor = coord.split(',');\n  return <Marker position={[coor[0], coor[1]]} icon={icon} />;\n};\n\nconst Home = () => {\n  const [latitude, setLatitude] = useState('46.227638');\n  const [longitude, setLongitude] = useState('2.213749');\n  const [name, setName] = useState('');\n  const [message, setMessage] = useState('');\n  const [lieu, setLieu] = useState([]);\n  const [hierarchy, setHierarchy] = useState([]);\n\n  const handleInputLatitudeChange = (event) => {\n    const { value } = event.target;\n    setLatitude(value);\n  };\n\n  const handleInputLongitudeChange = (event) => {\n    const { value } = event.target;\n    setLongitude(value);\n  };\n\n  const handleInputNameChange = (event) => {\n    const { value } = event.target;\n    setName(value);\n  };\n\n  const searchByCoord = () => {\n    fetch('http://localhost:5000/api/r1', {\n      method: 'POST',\n      headers: {\n        Accept: 'application/json',\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({ lat: latitude, lon: longitude, code: 4 }),\n    })\n      .then((res) => res.json())\n      .then((data) => {\n        if (data.msg) {\n          setMessage(data.msg);\n        } else {\n          setLieu(data.lieu);\n          setHierarchy(data.hierarchy);\n          setMessage('');\n        }\n      });\n  };\n\n  const searchByName = () => {\n    fetch(`http://localhost:5000/api/r2/${name}/4`, {\n      method: 'GET',\n      headers: {\n        Accept: 'application/json',\n        'Content-Type': 'application/json',\n      },\n    })\n      .then((res) => res.json())\n      .then((data) => {\n        setLieu(data.lieu);\n        setHierarchy(data.hierarchy);\n      });\n  };\n\n  return (\n    <Container className=\"homePage\">\n      <Form>\n        <Form.Group controlId=\"ville\">\n          <Form.Label>Recherche par ville</Form.Label>\n          <Form.Control\n            type=\"text\"\n            placeholder=\"Saisir le nom d'une ville\"\n            value={name}\n            onChange={handleInputNameChange}\n          />\n        </Form.Group>\n\n        <Button variant=\"warning\" onClick={searchByName}>\n          Envoyer\n        </Button>\n      </Form>\n\n      <br />\n      <Table striped bordered hover size=\"sm\">\n        <thead>\n          <tr>\n            <th></th>\n            <th>Lieux</th>\n            <th>Latitude</th>\n            <th>Longitude</th>\n            <th>Population</th>\n          </tr>\n        </thead>\n        <tbody>\n          {lieu.map((data) => (\n            <tr key={data.lat}>\n              <td></td>\n              <td>{data.name}</td>\n              <td>{data.lat}</td>\n              <td>{data.lon}</td>\n              <td>{data.pop}</td>\n            </tr>\n          ))}\n        </tbody>\n      </Table>\n      <br />\n      {hierarchy.length > 0 && (\n        <div>\n          <p>\n            Ces lieux se trouvent dans la zone: {hierarchy[0].name} avec une\n            population de {hierarchy[0].pop} habitants, qui se trouve dans le\n            département: {hierarchy[1].name} avec une population de{' '}\n            {hierarchy[1].pop} habitants, qui se trouve dans la région:{' '}\n            {hierarchy[2].name} avec une population de {hierarchy[2].pop}{' '}\n            habitants, qui se trouve dans le pays: {hierarchy[3].name} avec une\n            population de {hierarchy[3].pop} habitants\n          </p>\n        </div>\n      )}\n      <br />\n\n      <Form>\n        <Form.Group controlId=\"coord\">\n          <Form.Label>Recherche par coordonnées</Form.Label>\n          <Row>\n            <Col>\n              Latitude\n              <Form.Control\n                type=\"text\"\n                placeholder=\"Saisir la latitude\"\n                value={latitude}\n                onChange={handleInputLatitudeChange}\n              />\n            </Col>\n            <Col>\n              Longitude\n              <Form.Control\n                type=\"text\"\n                placeholder=\"Saisir la longitude\"\n                value={longitude}\n                onChange={handleInputLongitudeChange}\n              />\n            </Col>\n          </Row>\n        </Form.Group>\n\n        <Button variant=\"warning\" onClick={searchByCoord}>\n          Envoyer\n        </Button>\n      </Form>\n      <p className={alert}>{message}</p>\n\n      <br />\n      <Map center={[latitude, longitude]} zoom={6} scrollWheelZoom={false}>\n        <TileLayer\n          attribution='&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\n          url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n        />\n        {lieu.map((data) => (\n          <LocationMarker key={data.lat} coord={`${data.lat},${data.lon}`} />\n        ))}\n      </Map>\n    </Container>\n  );\n};\nexport default Home;\n"]},"metadata":{},"sourceType":"module"}