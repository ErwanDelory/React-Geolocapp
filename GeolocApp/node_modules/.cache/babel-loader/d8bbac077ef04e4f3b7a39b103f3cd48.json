{"ast":null,"code":"var _jsxFileName = \"/Users/erwandelory/Documents/Semestre_9/cloud_computing/projetcloud2front/src/pages/home.jsx\";\nimport React, { useState } from 'react';\nimport { Button, Col, Container, Form, Row, Table } from 'react-bootstrap';\nimport { Map, TileLayer, Marker } from 'react-leaflet';\nimport { Icon } from 'leaflet';\nimport 'leaflet/dist/leaflet.css';\nexport const icon = new Icon({\n  iconUrl: 'https://s3-us-west-2.amazonaws.com/s.cdpn.io/134893/pin-red.svg',\n  iconSize: [25, 25]\n});\n\nconst LocationMarker = ({\n  coord\n}) => {\n  const coor = coord.split(',');\n  return /*#__PURE__*/React.createElement(Marker, {\n    position: [coor[0], coor[1]],\n    icon: icon,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 14,\n      columnNumber: 10\n    }\n  });\n};\n\nconst Home = () => {\n  const [latitude, setLatitude] = useState('46.227638');\n  const [longitude, setLongitude] = useState('2.213749');\n  const [name, setName] = useState('');\n  const [message, setMessage] = useState('');\n  const [lieu, setLieu] = useState([]);\n  const [hierarchy, setHierarchy] = useState([]);\n\n  const handleInputLatitudeChange = event => {\n    const {\n      value\n    } = event.target;\n    setLatitude(value);\n  };\n\n  const handleInputLongitudeChange = event => {\n    const {\n      value\n    } = event.target;\n    setLongitude(value);\n  };\n\n  const handleInputNameChange = event => {\n    const {\n      value\n    } = event.target;\n    setName(value);\n  };\n\n  const searchByCoord = () => {\n    fetch('http://localhost:5000/api/find', {\n      method: 'POST',\n      headers: {\n        Accept: 'application/json',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        lat: latitude,\n        lon: longitude,\n        code: 4\n      })\n    }).then(res => res.json()).then(data => {\n      console.log(data);\n\n      if (data.msg) {\n        setMessage(data.msg);\n      } else {\n        setLieu(data.lieu);\n        setHierarchy(data.hierarchy);\n        setMessage('');\n      }\n    });\n  };\n\n  const searchByName = () => {\n    fetch(`http://localhost:5000/api/find/${name}/4`, {\n      method: 'GET',\n      headers: {\n        Accept: 'application/json',\n        'Content-Type': 'application/json'\n      }\n    }).then(res => res.json()).then(data => {\n      if (data.msg) {\n        setMessage(data.msg);\n      } else {\n        setLieu(data.lieu);\n        setHierarchy(data.hierarchy);\n        setMessage('');\n      }\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(Container, {\n    className: \"homePage\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Form, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Form.Group, {\n    controlId: \"ville\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 11\n    }\n  }, \"Recherche par ville\"), /*#__PURE__*/React.createElement(Form.Control, {\n    type: \"text\",\n    placeholder: \"Saisir le nom d'une ville\",\n    value: name,\n    onChange: handleInputNameChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(Button, {\n    variant: \"warning\",\n    onClick: searchByName,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 9\n    }\n  }, \"Envoyer\")), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Table, {\n    striped: true,\n    bordered: true,\n    hover: true,\n    size: \"sm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 13\n    }\n  }, \"Lieux\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 13\n    }\n  }, \"Latitude\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 13\n    }\n  }, \"Longitude\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 13\n    }\n  }, \"Population\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 9\n    }\n  }, lieu.map(data => /*#__PURE__*/React.createElement(\"tr\", {\n    key: data.lat,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 15\n    }\n  }, data.name), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 15\n    }\n  }, data.lat), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 15\n    }\n  }, data.lon), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 15\n    }\n  }, data.pop))))), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 7\n    }\n  }), hierarchy.length > 0 && /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 11\n    }\n  }, \"La hi\\xE9rarchie de la recherche est:\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"hierarchie\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 7\n    }\n  }, hierarchy.map(data => /*#__PURE__*/React.createElement(\"p\", {\n    key: data.name,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 11\n    }\n  }, ' -> ', data.name))), /*#__PURE__*/React.createElement(Form, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Form.Group, {\n    controlId: \"coord\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 11\n    }\n  }, \"Recherche par coordonn\\xE9es\"), /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 13\n    }\n  }, \"Latitude\", /*#__PURE__*/React.createElement(Form.Control, {\n    type: \"number\",\n    placeholder: \"Saisir la latitude\",\n    value: latitude,\n    onChange: handleInputLatitudeChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 13\n    }\n  }, \"Longitude\", /*#__PURE__*/React.createElement(Form.Control, {\n    type: \"number\",\n    placeholder: \"Saisir la longitude\",\n    value: longitude,\n    onChange: handleInputLongitudeChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 15\n    }\n  })))), /*#__PURE__*/React.createElement(Button, {\n    variant: \"warning\",\n    onClick: searchByCoord,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 9\n    }\n  }, \"Envoyer\")), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"alert\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 7\n    }\n  }, message), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Map, {\n    center: [latitude, longitude],\n    zoom: 6,\n    scrollWheelZoom: false,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(TileLayer, {\n    attribution: \"\\xA9 <a href=\\\"http://osm.org/copyright\\\">OpenStreetMap</a> contributors\",\n    url: \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 9\n    }\n  }), lieu.map(data => /*#__PURE__*/React.createElement(LocationMarker, {\n    key: data.lat,\n    coord: `${data.lat},${data.lon}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 11\n    }\n  }))));\n};\n\nexport default Home;","map":{"version":3,"sources":["/Users/erwandelory/Documents/Semestre_9/cloud_computing/projetcloud2front/src/pages/home.jsx"],"names":["React","useState","Button","Col","Container","Form","Row","Table","Map","TileLayer","Marker","Icon","icon","iconUrl","iconSize","LocationMarker","coord","coor","split","Home","latitude","setLatitude","longitude","setLongitude","name","setName","message","setMessage","lieu","setLieu","hierarchy","setHierarchy","handleInputLatitudeChange","event","value","target","handleInputLongitudeChange","handleInputNameChange","searchByCoord","fetch","method","headers","Accept","body","JSON","stringify","lat","lon","code","then","res","json","data","console","log","msg","searchByName","map","pop","length"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport { Button, Col, Container, Form, Row, Table } from 'react-bootstrap';\nimport { Map, TileLayer, Marker } from 'react-leaflet';\nimport { Icon } from 'leaflet';\nimport 'leaflet/dist/leaflet.css';\n\nexport const icon = new Icon({\n  iconUrl: 'https://s3-us-west-2.amazonaws.com/s.cdpn.io/134893/pin-red.svg',\n  iconSize: [25, 25],\n});\n\nconst LocationMarker = ({ coord }) => {\n  const coor = coord.split(',');\n  return <Marker position={[coor[0], coor[1]]} icon={icon} />;\n};\n\nconst Home = () => {\n  const [latitude, setLatitude] = useState('46.227638');\n  const [longitude, setLongitude] = useState('2.213749');\n  const [name, setName] = useState('');\n  const [message, setMessage] = useState('');\n  const [lieu, setLieu] = useState([]);\n  const [hierarchy, setHierarchy] = useState([]);\n\n  const handleInputLatitudeChange = (event) => {\n    const { value } = event.target;\n    setLatitude(value);\n  };\n\n  const handleInputLongitudeChange = (event) => {\n    const { value } = event.target;\n    setLongitude(value);\n  };\n\n  const handleInputNameChange = (event) => {\n    const { value } = event.target;\n    setName(value);\n  };\n\n  const searchByCoord = () => {\n    fetch('http://localhost:5000/api/find', {\n      method: 'POST',\n      headers: {\n        Accept: 'application/json',\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({ lat: latitude, lon: longitude, code: 4 }),\n    })\n      .then((res) => res.json())\n      .then((data) => {\n        console.log(data);\n        if (data.msg) {\n          setMessage(data.msg);\n        } else {\n          setLieu(data.lieu);\n          setHierarchy(data.hierarchy);\n          setMessage('');\n        }\n      });\n  };\n\n  const searchByName = () => {\n    fetch(`http://localhost:5000/api/find/${name}/4`, {\n      method: 'GET',\n      headers: {\n        Accept: 'application/json',\n        'Content-Type': 'application/json',\n      },\n    })\n      .then((res) => res.json())\n      .then((data) => {\n        if (data.msg) {\n          setMessage(data.msg);\n        } else {\n          setLieu(data.lieu);\n          setHierarchy(data.hierarchy);\n          setMessage('');\n        }\n      });\n  };\n\n  return (\n    <Container className=\"homePage\">\n      <Form>\n        <Form.Group controlId=\"ville\">\n          <Form.Label>Recherche par ville</Form.Label>\n          <Form.Control\n            type=\"text\"\n            placeholder=\"Saisir le nom d'une ville\"\n            value={name}\n            onChange={handleInputNameChange}\n          />\n        </Form.Group>\n\n        <Button variant=\"warning\" onClick={searchByName}>\n          Envoyer\n        </Button>\n      </Form>\n\n      <br />\n      <Table striped bordered hover size=\"sm\">\n        <thead>\n          <tr>\n            <th></th>\n            <th>Lieux</th>\n            <th>Latitude</th>\n            <th>Longitude</th>\n            <th>Population</th>\n          </tr>\n        </thead>\n        <tbody>\n          {lieu.map((data) => (\n            <tr key={data.lat}>\n              <td></td>\n              <td>{data.name}</td>\n              <td>{data.lat}</td>\n              <td>{data.lon}</td>\n              <td>{data.pop}</td>\n            </tr>\n          ))}\n        </tbody>\n      </Table>\n      <br />\n      {hierarchy.length > 0 && (\n        <div>\n          <p>La hiérarchie de la recherche est:</p>\n        </div>\n      )}\n      <div className=\"hierarchie\">\n        {hierarchy.map((data) => (\n          <p key={data.name}>\n            {' -> '}\n            {data.name}\n          </p>\n        ))}\n      </div>\n\n      <Form>\n        <Form.Group controlId=\"coord\">\n          <Form.Label>Recherche par coordonnées</Form.Label>\n          <Row>\n            <Col>\n              Latitude\n              <Form.Control\n                type=\"number\"\n                placeholder=\"Saisir la latitude\"\n                value={latitude}\n                onChange={handleInputLatitudeChange}\n              />\n            </Col>\n            <Col>\n              Longitude\n              <Form.Control\n                type=\"number\"\n                placeholder=\"Saisir la longitude\"\n                value={longitude}\n                onChange={handleInputLongitudeChange}\n              />\n            </Col>\n          </Row>\n        </Form.Group>\n\n        <Button variant=\"warning\" onClick={searchByCoord}>\n          Envoyer\n        </Button>\n      </Form>\n      <p className=\"alert\">{message}</p>\n\n      <br />\n      <Map center={[latitude, longitude]} zoom={6} scrollWheelZoom={false}>\n        <TileLayer\n          attribution='&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\n          url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n        />\n        {lieu.map((data) => (\n          <LocationMarker key={data.lat} coord={`${data.lat},${data.lon}`} />\n        ))}\n      </Map>\n    </Container>\n  );\n};\nexport default Home;\n"]},"metadata":{},"sourceType":"module"}